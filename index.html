<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="CabNIR: A Benchmark for In-Vehicle Infrared Monocular Depth Estimation">

        <!--Facebook preview-->
        <meta property="og:image" content="https://cabnir.github.io/assets/social_card.png">
        <meta property="og:type" content="website"/>
        <meta property="og:url" content="https://cabnir.github.io/"/>
        <meta property="og:title" content="CabNIR: A Benchmark for In-Vehicle Infrared Monocular Depth Estimation"/>
        <meta property="og:description" content="CabNIR is a benchmark for in-cabin monocular depth estimation, featuring 41k near-infrared frames featuring 36 vehicle cabins and 45 participants, with diverse lighting conditions.                         Among real IR datasets sporting a top-frontal setup, CabNIR combines the largest number of cabins and participants with the widest FoV."/>

        <!--Twitter preview-->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="CabNIR: A Benchmark for In-Vehicle Infrared Monocular Depth Estimation" />
        <meta name="twitter:description" content="CabNIR is a benchmark for in-cabin monocular depth estimation, featuring 41k near-infrared frames featuring 36 vehicle cabins and 45 participants, with diverse lighting conditions.                         Among real IR datasets sporting a top-frontal setup, CabNIR combines the largest number of cabins and participants with the widest FoV."/>
        <meta name="twitter:image" content="https://cabnir.github.io/assets/social_card.png">

        <title>CabNIR</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
            rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
            crossorigin="anonymous">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
              crossorigin="anonymous">

    <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css
          integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous>

        <link href="style.css" rel="stylesheet">
        <link rel="icon" href="assets/fav_icon.png">
    </head>
    <body>

        <div class="container">
            <div class="row text-center">
                <h1 class="mt-3">CabNIR</h1>
                <h3>A Benchmark for In-Vehicle Infrared Monocular Depth Estimation</h3>
                <h4 class="mb-4">WACV 2025</h4>
            </div>
            <div class="row text-center">
                <div class="col-sm-0 col-md-2"></div>
                <div class="col-sm-12 col-md-8">
                    <h6>
                        <a href="https://www.ugoleonecavalcanti.com/" target="_blank"><nobr>Ugo Leone Cavalcanti<sup>1</sup></nobr></a> &emsp;
                        <a href="https://mattpoggi.github.io/" target="_blank"><nobr>Matteo Poggi<sup>1</sup></nobr></a> &emsp;
                        <a href="https://fabiotosi92.github.io/" target="_blank"><nobr>Fabio Tosi<sup>1</sup></nobr></a></br>
                        <a href="https://scholar.google.com/citations?user=yYHJGZUAAAAJ&hl=en" target="_blank"><nobr>Valerio Cambareri<sup>2</sup></nobr></a> &emsp;
                        <a href="https://scholar.google.com/citations?user=zXASIq8AAAAJ&hl=en" target="_blank"><nobr>Vladimir Zlokolica<sup>2</sup></nobr></a> &emsp;
                        <a href="http://vision.deis.unibo.it/~smatt/Site/Home.html" target="_blank"><nobr>Stefano Mattoccia<sup>1</sup></nobr></a> &emsp;
                    </h6>
                    <sup>1</sup>&nbsp;Department of Computer Science and Engineering, University of Bologna, Italy</br><sup>2</sup>&nbsp;<nobr>Sony Depthsensing Solutions, Brussels, Belgium&nbsp;&nbsp;&nbsp;</nobr><br>
                </div>
                <div class="col-sm-0 col-md-2"></div>
                <div class="col-md-12 mt-3">
                    <a href="#" class="btn btn-secondary btn-sm" target="_blank"><i class="fa-solid fa-file-pdf"></i>&nbsp;&nbsp;Paper</a>
                    <a href="#" class="btn btn-secondary btn-sm" target="_blank"><i class="fa-solid fa-file-pdf"></i>&nbsp;&nbsp;Supplement</a>
                    <a href="#" class="btn btn-secondary btn-sm" target="_blank"><i class="ai ai-arxiv"></i></i>&nbsp;&nbsp;arXiv</a>
                    <a href="#" target="_blank" class="btn btn-secondary btn-sm"><i class="fa fa-download"></i>&nbsp;&nbsp;Download</a>
                    <a href="#citation" class="btn btn-secondary btn-sm"><i class="fa-solid fa-file"></i>&nbsp;&nbsp;BibTeX</a>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-0 col-md-2"></div>
                <div class="col-sm-12 col-md-8">

                    <video class="w-100 mt-4" autoplay loop muted>
                        <source src="assets/header_lo.mp4" type="video/mp4" />
                    </video>

                    <h3 class="mt-3">Abstract</h3>
                    <hr/>
                    <p>
                        Accurate in-cabin depth estimation is critical for advancing automotive safety and occupant comfort. However, existing datasets for 
                        in-vehicle scene understanding tasks often fall short in providing sufficient information and scale needed to evaluate existing depth 
                        estimation methods. In this paper, we present a novel benchmark tailored for monocular depth estimation in vehicle interiors, containing 
                        both near-infrared (NIR) images and corresponding ground truth depth data. Featuring over 41,000 frames captured across 36 distinct 
                        vehicles and 45 different passengers, it offers an unprecedented level of variability for this application domain. Evaluation on our 
                        testbench of cutting-edge single-view depth models in different flavors, including zero-shot affine-invariant depth estimation or indomain 
                        specialization, reveals that current depth estimation approaches, while promising, still have a significant performance gap to overcome 
                        before achieving the reliability required for downstream safety-critical applications. In light of its diverse range and complex scenarios, 
                        we believe this benchmark could serve as a common reference for further research concerning in-cabin monocular depth estimation
                    </p>

                    <h3 class="mt-5" id="overview">Overview of the CabNIR dataset</h3>
                    <hr class="hr"/>
                    <p>
                        The dataset comprises 47 scenes (29 recorded at night and 18 during the daytime) featuring 45 people (31 males and 14 females) and 36 cabins.
                        We placed in 10 scenes everyday objects such as bags, jackets, headphones, laptops, mobile phones, and other small personal items.
                        In addition, 4 scenes feature drivers or passengers wearing caps and 14 people wearing glasses or sunglasses.
                    </p>
                    <!--<img class="w-100 mb-3" src="assets/dataOverview.png" alt=""/>-->
                    <p>
                        We collected a total of 41,226 frames and partitioned the scenes as the training set (37 scenes, 32,195 frames) and another part featuring people 
                        and vehicles that do not appear in the training set as the testing set (5 scenes each, 4,516 frames). We also define a validation split using 5 
                        other scenes (4,515 frames) containing vehicles and people that may appear in some of the clips in the training set, but in a different setting.
                    </p>
                    <!--<img class="w-100 mb-3" src="assets/validationOverview.png" alt=""/>-->
                    <p>
                        Among real IR datasets sporting a top-frontal setup, CabNIR combines the largest number of cabins and participants with the widest FoV.
                    </p>

                    <div class="table-responsive-lg">
                        <table class="table text-center table-striped table-hover table-sm table-dark">
                            <thead class="thead-dark text-center">
                                <tr>
                                    <th>Sequence Name</th>
                                    <th>Model</th>
                                    <th># of Seats</th>
                                    <th>Ceiling</th>
                                    <th>Front</th>
                                    <th>Back</th>
                                    <th>Camera Pose</th>
                                    <th>Everyday Objs</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>500_A_1_Night</td><td>Fiat 500</td><td>4</td><td>Glass</td><td>Driver Alone</td><td>1 Passenger</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>500_B_1_Day</td><td>Fiat 500</td><td>4</td><td>Soft Top</td><td>Driver+Passenger</td><td>Empty</td><td>High</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>500_C_1_Night</td><td>Fiat 500</td><td>4</td><td>Soft Top</td><td>Driver+Passenger</td><td>Empty</td><td>High</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>500_D_1_Night</td><td>Fiat 500</td><td>4</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>High</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>A1_A_1_Day</td><td>Audi A1</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>High</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>A3_A_1_Day</td><td>Audi A3</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>High</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>A3_A_2_Day</td><td>Audi A3</td><td>5</td><td>Hard Top</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>A3_B_1_Night</td><td>Audi A3</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>High</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Beetle_A_1_Day</td><td>Volkswagen Beetle</td><td>4</td><td>Soft Top</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Beetle_A_2_Day</td><td>Volkswagen Beetle</td><td>4</td><td>Soft Top</td><td>Driver+Passenger</td><td>2 Passenger</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Beetle_A_3_Day</td><td>Volkswagen Beetle</td><td>4</td><td>Soft Top</td><td>Driver Alone</td><td>1 Passenger</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>C3_A_1_Night</td><td>Citroen C3</td><td>5</td><td>Glass+Fabric</td><td>Driver+Passenger</td><td>1 Passenger</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>C3_A_2_Night</td><td>Citroen C3</td><td>5</td><td>Glass+Fabric</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>CLA_A_1_Day</td><td>Mercedes CLA</td><td>5</td><td>Hard Top</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Empty</td><td>Fiat 500</td><td>4</td><td>Soft Top</td><td>Empty</td><td>Empty</td><td>High</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Fortwo_A_1_Night</td><td>Smart Fortwo</td><td>2</td><td>Soft Top</td><td>Driver Alone</td><td>-</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Fortwo_B_1_Night</td><td>Smart Fortwo</td><td>2</td><td>Glass</td><td>Driver+Passenger</td><td>-</td><td>High</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Fortwo_C_1_Night</td><td>Smart Fortwo</td><td>2</td><td>Hard Top</td><td>Driver+Passenger</td><td>-</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>GX3_A_1_Day</td><td>Mazda GX3</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Golf_A_1_Night</td><td>Volkswagen Golf</td><td>5</td><td>Glass</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Ibiza_A_1_Day</td><td>Seat Ibiza</td><td>5</td><td>Hard Top</td><td>Driver+Passenger</td><td>1 Passenger</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Jimny_A_1_Day</td><td>Suzuki Jimny</td><td>3</td><td>Hard Top</td><td>Driver+Passenger</td><td>Empty</td><td>High</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Mito_A_1_Day</td><td>Alfa Romeo Mito</td><td>4</td><td>Hard Top</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Model3_A_1_Night</td><td>Tesla Model 3</td><td>5</td><td>Glass</td><td>Driver</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Model3_A_2_Night</td><td>Tesla Model 3</td><td>5</td><td>Glass</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Panda_A_1_Day</td><td>Fiat Panda</td><td>4</td><td>Hard Top</td><td>Driver+Passenger</td><td>Empty</td><td>High</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Panda_B_1_Day</td><td>Fiat Panda</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>High</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Panda_C_1_Night</td><td>Fiat Panda</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Panda_D_1_Day</td><td>Fiat Panda</td><td>4</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Panda_E_1_Night</td><td>Fiat Panda</td><td>5</td><td>Hard Top</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Panda_E_2_Night</td><td>Fiat Panda</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Panda_F_1_Night</td><td>Fiat Panda</td><td>5</td><td>Hard Top</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Panda_F_2_Night</td><td>Fiat Panda</td><td>5</td><td>Hard Top</td><td>Driver+Passenger</td><td>1 Passenger</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Polo_A_1_Night</td><td>Volkswagen Polo</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>High</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Puma_A_1_Night</td><td>Ford Puma</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>RS3_A_1_Night</td><td>Audi RS3</td><td>5</td><td>Glass</td><td>Driver+Passenger</td><td>1 Passenger</td><td>High</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Up_A_1_Day</td><td>Volkswagen Up</td><td>4</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>High</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Up_B_1_Night</td><td>Volkswagen Up</td><td>4</td><td>Hard Top</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>V60_A_1_Night</td><td>Volvo V60</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>X2_A_1_Night</td><td>BMW X2</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Yaris_A_1_Night</td><td>Toyota Yaris</td><td>5</td><td>Hard Top</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Yaris_A_2_Night</td><td>Toyota Yaris</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Yaris_B_1_Night</td><td>Toyota Yaris</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>High</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Yaris_C_1_Night</td><td>Toyota Yaris</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Yaris_D_1_Night</td><td>Toyota Yaris</td><td>5</td><td>Hard Top</td><td>Driver Alone</td><td>Empty</td><td>Low</td><td class="text-danger">&#10007;</td></tr>
                                <tr><td>Yaris_E_1_Day</td><td>Toyota Yaris</td><td>5</td><td>Hard Top</td><td>Driver+Passenger</td><td>Empty</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                                <tr><td>Yaris_E_2_Day</td><td>Toyota Yaris</td><td>5</td><td>Hard Top</td><td>Driver+Passenger</td><td>1 Passenger</td><td>Low</td><td class="text-success">&#10003;</td></tr>
                            </tbody>
                        </table>
                    </div>



                    <h3 class="mt-5" id="overview">Naming and structure</h3>
                    <hr class="hr"/>
                    <p>
                        Frames related to each recording session are contained in a directory named as the following scheme:
                    </p>
                    <pre class="w-100 user-select-all font-monospace border border-secondary bg-dark p-2"><code>[model_name]_[version]_[sequence]_[day|night]</code></pre>
                    <ul>
                        <li><code>[model_name]</code> is the car model</li>
                        <li><code>[version]</code> is an identification letter used to distinguish between different version of the same car model</li>
                        <li><code>[sequence]</code> is a progressive number to identify distinct recordings of the same cabin</li>
                        <li><code>[day|night]</code> indicates whether the recording session has been done in daytime or at night</li>
                    </ul>
                    <p>
                        The use of different versions is denoted by the <code>[version]</code> letter. However, there is also a collection of scenes made with the same cabin, 
                        this is indicated by the same <code>[version]</code> letter and a different <code>[sequence]</code> number. As an example: in <code>Yaris_A_1_Night</code> and <code>Yaris_A_2_Night</code>
                        we have the same cabin and camera pose, but in the first sequence the driver is with a passenger, while in the second sequence he is alone.
                    </p>
                    

                    
                    <h3 class="mt-5" id="overview">Data acquisition</h3>
                    <hr class="hr"/>
                    <p>
                        Our collection campaign took place both during daytime and nighttime in urban and rural areas, with different outdoor routes and weather conditions.
                    </p>
                    <p>
                        The collection process was set to record videos at 15 FPS with the <a href="https://learn.microsoft.com/en-us/previous-versions/azure/kinect-dk/azure-kinect-recorder">
                        Microsoft Azure Kinect recorder tool</a> provided by the <a href="https://learn.microsoft.com/en-us/previous-versions/azure/kinect-dk/sensor-sdk-download">Sensor SDK</a>;
                        the tool yields synchronized NIR and Depth images at 1024 &times; 1024 resolution over a FoV of 120&deg; &times; 120&deg;.
                    </p>
                    <img class="w-100 mb-3" src="assets/acqusitionSetup.png" alt=""/>
                    <p>
                        Image frames are encoded as PNG b16g (16-bit grayscale, big-endian format). NIR images reach a maximum intensity value below 13500, except for saturated pixels, 
                        which are flagged with a fixed value of 65535; we therefore decided to clip the NIR image range to [0, 13500], which we then normalize to [0, 1] before feeding 
                        it to the monocular networks.
                    </p>



                    <h3 class="mt-5" id="overview">Input preprocessing</h3>
                    <hr class="hr"/>
                    <p>
                        Since image frames are encoded as PNG b16g (16-bit grayscale, big-endian format) and NIR images reach a maximum intensity value below 13500 (except for saturated pixels, 
                        which are flagged with a fixed value of 65535), here is a Python snippet to easily load files:
                    </p>
                    <pre class="w-100 user-select-all font-monospace border border-secondary bg-dark p-2">
<code>import cv2
import numpy as np
from skimage import exposure

<span class="text-success"># File loading</span>
depth_map = cv2.imread('path_depth', flags=cv2.IMREAD_UNCHANGED)
ir_image = cv2.imread('path_ir', flags=cv2.IMREAD_UNCHANGED)
ir_image = np.array(ir).astype('>u2')  

<span class="text-success"># CLIPPING</span>
clipValue = 13500
ir_image[ir_image > clipValue] = clipValue

<span class="text-success"># Contrast stretching</span>
ir_image = exposure.equalize_hist(ir_image)

<span class="text-success">..</span></code></pre>



                    <h3 class="mt-5" id="overview">Responsibility to human subjects</h3>
                    <hr class="hr"/>
                    <p>
                        Since our dataset aims at in-cabin monitoring, it necessarily features the presence of people whose faces are visible. Indeed, although 
                        faces represent Personally Identifiable Information (PII), we cannot hide or blur these details to avoid altering the depth estimation 
                        process. As such, all the subjects involved in our acquisitions have been made perfectly aware of the information stored (NIR images 
                        and depth maps) and purposes. Each participant agreed to sign an explicit consent form.
                    </p>
                    <p>
                        Furthermore, our dataset has been approved by our <a href="https://www.unibo.it/en/research/research-organisation-and-infrastructure/ethics-committees/bioethics-committee">
                        institutionâ€™s Institutional Review Board (IRB)</a>. According to the IRB guidance, CabNIR will be available only to registered users: 
                        they shall provide a short overview of their research goal and use the data only for scientific purposes, targeting in-cabin monitoring 
                        through depth estimation.
                    </p>
                    
                    <h3 class="mt-5" id="citation">Please consider citing our paper</h3>
                    <hr class="hr"/>
                    <pre class="w-100 user-select-all font-monospace border border-secondary bg-dark mb-5 p-2"></pre>
                    
                    <footer class="bg-dark text-white text-center py-3 mt-5">
                        <div class="container">
                            <p>
                                This project page tamplate is inspired by <a href="https://nianticlabs.github.io/acezero/">ACE Zero</a>
                            </p>
                        </div>
                    </footer>
                </div>
                <div class="col-sm-0 col-md-2"></div>    
                    
                </div>
            </div>
            
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>
            <!-- <script src="https://kit.fontawesome.com/746ee6bfa4.js" crossorigin="anonymous"></script> -->
            
            <script>
            window.addEventListener('load', videoScroll);
            window.addEventListener('scroll', videoScroll);

            function videoScroll() {

                if ( document.querySelectorAll('video[autoplay]').length > 0) {

                    var windowHeight = window.innerHeight,
                    videoEl = document.querySelectorAll('video[autoplay]');

                    for (var i = 0; i < videoEl.length; i++) {

                        var thisVideoEl = videoEl[i],
                            videoHeight = thisVideoEl.clientHeight,
                            videoClientRect = thisVideoEl.getBoundingClientRect().top;

                        if ( (thisVideoEl.parentNode.classList.contains('carousel-item') && thisVideoEl.parentNode.classList.contains('active')) || (thisVideoEl.parentNode.nodeName === 'DIV' && !thisVideoEl.parentNode.classList.contains('carousel-item') )) {
                            if ( videoClientRect <= ( (windowHeight) - (videoHeight*.8) ) && videoClientRect >= ( 0 - ( videoHeight*.2 ) ) ) {
                                thisVideoEl.play();
                            } else {
                                thisVideoEl.pause();
                            }
                        }
                    }
                }
            }
        </script>
    </body>
</html>
